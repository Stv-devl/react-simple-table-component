<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: hook/useManageFilter.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: hook/useManageFilter.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, { useEffect, useMemo, useState } from "react";

/**
 * Custom hook for managing table filters, search, and pagination.
 * @param {Object[]}datas - The data to be filtered and paginated.
 * @param {number}currentPage - The current active page number.
 * @param {function} setCurrentPage - The function to update the current page number.
 * @returns {Object} - The filter tools, filtered data, page number, and a function to handle changes to the filters.
 */

const useManageFilter = ({ datas, currentPage, setCurrentPage }) => {
  const [filterTools, setFilterTools] = useState({
    updownselected: null,
    updown: null,
    legend: null,
    searchbar: "",
    entries: 10,
  });
  //set the number of pages
  const [pageNumber, setPageNumber] = useState(
    Math.ceil(datas.length / filterTools.entries)
  );

  //set current page at 1 when whe use searchbar or change entries
  useEffect(() => {
    setCurrentPage(1);
  }, [filterTools.searchbar, filterTools.entries, setCurrentPage]);

  const filteredData = useMemo(() => {
    let filtered = datas.filter((el) =>
      Object.values(el).some((value) =>
        value.toLowerCase().includes(filterTools.searchbar.toLowerCase())
      )
    );
    //change the number of page when we use search bar
    setPageNumber(Math.ceil(filtered.length / filterTools.entries));

    if (filterTools.legend) {
      const { legend, updown } = filterTools;
      const direction = updown ? 1 : -1;
      filtered = filtered.sort((a, b) => {
        return a[legend].localeCompare(b[legend]) * direction;
      });
    }
    const startIndex = (currentPage - 1) * filterTools.entries;
    const endIndex = currentPage * filterTools.entries;
    filtered = filtered.slice(startIndex, endIndex);

    return filtered;
  }, [datas, filterTools, currentPage]);

  const handleChange = (updates) => {
    setFilterTools((prev) => ({ ...prev, ...updates }));
  };

  return { filterTools, filteredData, pageNumber, handleChange };
};

export default useManageFilter;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#Dropdown">Dropdown</a></li><li><a href="global.html#Entries">Entries</a></li><li><a href="global.html#FilterTopOrUp">FilterTopOrUp</a></li><li><a href="global.html#Input">Input</a></li><li><a href="global.html#List">List</a></li><li><a href="global.html#Paging">Paging</a></li><li><a href="global.html#Search">Search</a></li><li><a href="global.html#ShowEntries">ShowEntries</a></li><li><a href="global.html#Table">Table</a></li><li><a href="global.html#useManageFilter">useManageFilter</a></li><li><a href="global.html#usePagination">usePagination</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.3</a> on Fri Jun 21 2024 15:14:17 GMT+0700 (Indochina Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
